<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Wordsmith</title>
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://quilljs.com/standalone/full/">
  <meta property="og:image" content="https://quilljs.com/assets/images/brand-asset.png">
  <meta property="og:title" content="Full Editor - Quill">
  <meta property="og:site_name" content="Quill">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css" />
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <style>
    #editor-container {
  height: 350px;
}

.container {
  margin-bottom: 10px;
  text-align: right;
}

.container a {
  font-family: Helvetia, sans-serif;
}
  </style>
</head>

<body>
  <div class="container"><a href="https://quilljs.com">Navigate away...</a></div>
  <div id="editor-container"></div>

  <!-- Initialize editor with toolbar -->
  <script>
var Delta = Quill.import('delta');
var quill = new Quill('#editor-container', {
  modules: {
    toolbar: true
  },
  placeholder: 'Compose an epic...',
  theme: 'snow'
});

// Store accumulated changes
var change = new Delta();
quill.on('text-change', function(delta) {
  change = change.compose(delta);
});

// Save periodically
setInterval(function() {
  if (change.length() > 0) {
    console.log('Saving changes', change);
    /* 
    Send partial changes
    $.post('/your-endpoint', { 
      partial: JSON.stringify(change) 
    });
    
    Send entire document
    $.post('/your-endpoint', { 
      doc: JSON.stringify(quill.getContents())
    });
    */
    change = new Delta();
  }
}, 5*1000);

// Check for unsaved data
window.onbeforeunload = function() {
  if (change.length() > 0) {
    return 'There are unsaved changes. Are you sure you want to leave?';
  }
}
  </script>
</body>

</html>
